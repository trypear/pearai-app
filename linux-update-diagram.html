<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PearAI Update Flow Diagram</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PearAI Update Flow Diagram</h1>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600" width="800" height="600">
            <!-- Styles -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                </marker>
            </defs>

            <!-- Process Boxes -->
            <rect x="300" y="20" width="200" height="50" rx="5" fill="#4CAF50" stroke="#2E7D32"/>
            <text x="400" y="50" text-anchor="middle" fill="white">Check for Updates</text>

            <!-- Decision Diamond -->
            <path d="M350,100 L400,150 L450,100 L400,50 Z" fill="#FFA726" stroke="#F57C00"/>
            <text x="400" y="110" text-anchor="middle" fill="white">Update Available?</text>

            <!-- Download Box -->
            <rect x="300" y="180" width="200" height="50" rx="5" fill="#42A5F5" stroke="#1976D2"/>
            <text x="400" y="210" text-anchor="middle" fill="white">Download PearAI.tar.gz</text>

            <!-- Close App Box -->
            <rect x="300" y="260" width="200" height="50" rx="5" fill="#42A5F5" stroke="#1976D2"/>
            <text x="400" y="290" text-anchor="middle" fill="white">Close PearAI Application</text>

            <!-- Rename Box -->
            <rect x="300" y="340" width="200" height="50" rx="5" fill="#42A5F5" stroke="#1976D2"/>
            <text x="400" y="360" text-anchor="middle" fill="white" font-size="12">Rename to ~/.local/PearAI.old</text>

            <!-- Extract Box -->
            <rect x="300" y="420" width="200" height="50" rx="5" fill="#42A5F5" stroke="#1976D2"/>
            <text x="400" y="440" text-anchor="middle" fill="white" font-size="12">Extract to ~/.local/PearAI</text>

            <!-- OS Check Diamond -->
            <path d="M350,500 L400,550 L450,500 L400,450 Z" fill="#FFA726" stroke="#F57C00"/>
            <text x="400" y="510" text-anchor="middle" fill="white">NixOS?</text>

            <!-- Permission Boxes -->
            <rect x="100" y="520" width="200" height="50" rx="5" fill="#42A5F5" stroke="#1976D2"/>
            <text x="200" y="540" text-anchor="middle" fill="white" font-size="10">chown -R ${id -u}:${id -u}</text>

            <rect x="500" y="520" width="200" height="50" rx="5" fill="#42A5F5" stroke="#1976D2"/>
            <text x="600" y="540" text-anchor="middle" fill="white" font-size="10">chown -R ${whoami}:users</text>

            <!-- Arrows -->
            <line x1="400" y1="70" x2="400" y2="100" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="400" y1="150" x2="400" y2="180" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="400" y1="230" x2="400" y2="260" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="400" y1="310" x2="400" y2="340" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="400" y1="390" x2="400" y2="420" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="400" y1="470" x2="400" y2="500" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- Decision Lines -->
            <line x1="350" y1="500" x2="200" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
            <line x1="450" y1="500" x2="600" y2="520" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

            <!-- No Update Path -->
            <rect x="500" y="100" width="200" height="50" rx="5" fill="#9E9E9E" stroke="#616161"/>
            <text x="600" y="130" text-anchor="middle" fill="white">Continue Running</text>
            <line x1="450" y1="100" x2="500" y2="125" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>
        </svg>
    </div>
</body>
</html>